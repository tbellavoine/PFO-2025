<div class="flex flex-col p-6 md:p-20 gap-12 text-light/60">
  <div class="flex flex-col gap-2  justify-center items-center">
    <p class="text-xs text-accent/50 mb-4">
      &lt;game /&gt;
    </p>
    <h3 class="text-5xl text-light font-semibold">Snake</h3>
    <p class="text-accent text-xl italic">Jouons...</p>
  </div>
    <div class="flex flex-col lg:flex-row gap-6 w-full justify-center">
      <div class="p-4">
        <div class="relative grid gap-1 mx-auto w-fit border border-accent"
             [style.grid-template-columns]="'repeat(' + gridSize + ', 1fr)'">
          @for (cell of gameGrid(); track $index) {
            <div
              class="flex items-end justify-center w-2 h-2 lg:w-4 lg:h-4 lg:rounded-sm transition-all duration-150 border border-primary-darker/50"
              [ngClass]="{
                'bg-accent animate-pulse !border-none': isSnakeHead($index),
                'bg-accent/50 !rounded-full': isSnakeBody($index),
                'bg-primary-darker/50': !isSnakeHead($index) && !isSnakeBody($index) && !isFood($index)
              }">
              @if(isFood($index)) {
                <div class="animate-bounce text-xs lg:text-lg">
                  <fa-icon class="text-red-500 animate-bounce" [icon]="['fas', 'apple-whole']"/>
                </div>
              }
            </div>
          }
          @if (gameOver()) {
            <div class="absolute flex flex-col items-center justify-center top-0 right-0 bottom-0 left-0 z-5 bg-primary/80">
              <p class="text-3xl font-bold mb-4 text-accent">Game Over!</p>
              <p class="text-xl mb-2">Score: <span class="font-bold text-light">{{ score() }}</span></p>
              @if (isNewRecord()) {
                <p class="text-lg mb-4 text-light animate-pulse">Nouveau record</p>
              }
              <button
                (click)="resetGame()"
                class="p-3 border border-accent transition-all text-light hover:bg-accent  cursor-pointer">
                Recommencer
              </button>
            </div>
          }
        </div>
        <p class="text-center w-full p-3 italic text-xs">Z Q S D pour se d√©placer</p>
        <div class="flex justify-center gap-6 pt-6">
          <button
            (click)="toggleGame()" [disabled]="gameOver()"
            class="p-3 border border-accent transition-all text-light hover:bg-accent  cursor-pointer">
            {{ isPlaying() ? 'Pause' : 'Jouer' }}
          </button>
          <button
            (click)="resetGame()"
            class="p-3 border border-accent transition-all text-light hover:bg-accent cursor-pointer">
            Recommencer
          </button>
        </div>
      </div>
      <div class="flex flex-col">
        <div class="flex-1">
          <div class="py-4">
            <p class="text-white text-xl font-semibold">
              <span class="text-md italic text-accent">Score: </span>{{ score() }}
            </p>
          </div>
          <div class="border-t border-t-accent flex flex-col gap-6 py-8">
            <p class="text-light text-sm">
              <span class="text-accent">Best: </span>
              {{ highScore() }}
            </p>
          </div>
        </div>
      </div>
    </div>
</div>
